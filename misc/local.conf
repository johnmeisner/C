MACHINE ??= 'imx8qxpc0mek'
DISTRO ?= 'fsl-imx-xwayland'
PACKAGE_CLASSES ?= "package_rpm"
#EXTRA_IMAGE_FEATURES ?= "tools-debug debug-tweaks eclipse-debug"
USER_CLASSES ?= "buildstats image-mklibs image-prelink"
PATCHRESOLVE = "noop"
BB_DISKMON_DIRS ??= "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    STOPTASKS,/tmp,100M,100K \
    ABORT,${TMPDIR},100M,1K \
    ABORT,${DL_DIR},100M,1K \
    ABORT,${SSTATE_DIR},100M,1K \
    ABORT,/tmp,10M,1K"
PACKAGECONFIG_append_pn-qemu-native = " sdl"
PACKAGECONFIG_append_pn-nativesdk-qemu = " sdl"
CONF_VERSION = "1"

DL_DIR ?= "${BSPDIR}/downloads/"
ACCEPT_FSL_EULA = "1"

#Added by JStinnett 20200825
IMAGE_INSTALL_append = " pps-tools"
IMAGE_INSTALL_append = " android-tools"
IMAGE_INSTALL_append = " chrony"
IMAGE_INSTALL_append = " chronyc"
IMAGE_INSTALL_append = " ldd"
IMAGE_INSTALL_append = " dosfstools"
#IMAGE_INSTALL_append = " bluez5"
#IMAGE_INSTALL_append = " firmware-qca6174"
#IMAGE_INSTALL_append = " qca-tools"
#IMAGE_INSTALL_append = " kernel-module-qca6174"
IMAGE_INSTALL_append = " dos2unix"
IMAGE_INSTALL_append = " vim-xxd"
IMAGE_INSTALL_append = " lsof"
IMAGE_INSTALL_append = " wireless-tools"
IMAGE_INSTALL_append = " iw"
IMAGE_INSTALL_append = " u-boot-fw-utils"
IMAGE_INSTALL_append = " mmc-utils"
IMAGE_INSTALL_append = " grep"
# ZIP command needed by webgui for compressing logs
IMAGE_INSTALL_append = " zip"
## Added 20210115, command "file" used by scripts/runtime_check.sh
IMAGE_INSTALL_append = " file"
IMAGE_INSTALL_append = " python3"
## Added 20210120, stress-ng suite used by testing teams
## 20210217: Add only for internal test; not for official release
#IMAGE_INSTALL_append = " stress-ng"
#IMAGE_INSTALL_append = " ffmpeg"
PACKAGECONFIG_remove = " timesyncd"
PACKAGECONFIG_remove += "imx-test"
IMAGE_INSTALL_remove += "imx-test"
IMAGE_INSTALL_remove += "bluez5-dev"
#                        packagegroup-fsl-tools-testapps \
#                        "
IMAGE_INSTALL_remove = " dropbear"
PACKAGE_EXCLUDE += "packagegroup-core-ssh-dropbear"
IMAGE_INSTALL_append = " packagegroup-core-ssh-openssh"
IMAGE_INSTALL_append = " openssh-sftp-server"
IMAGE_INSTALL_append = " dnsmasq"
IMAGE_INSTALL_append = " iptables"
IMAGE_INSTALL_append = " lpwr-int"
#IMAGE_INSTALL_append = " pshbtn-int"
IMAGE_INSTALL_append = " atlk-cv2x"
IMAGE_INSTALL_append = " atlk-secton"
IMAGE_INSTALL_append = " atlk-flasher"
IMAGE_INSTALL_append = " dfu-util"
#IMAGE_INSTALL_append = " fbida"
PREFERRED_PROVIDER_u-boot-fw-utils = "u-boot-fw-utils"
PREFERRED_PROVIDER_ptpd = "ptpd"
PREFERRED_PROVIDER_ptpd-dev = "ptpd"

PACKAGECONFIG_remove += "alsa-utils"
IMAGE_INSTALL_remove += "alsa-utils"
PACKAGECONFIG_remove += "alsa-conf"
IMAGE_INSTALL_remove += "alsa-conf"
PACKAGECONFIG_remove += "alsa-state"
IMAGE_INSTALL_remove += "alsa-state"
PACKAGECONFIG_remove += "imx-alsa-plugins"
IMAGE_INSTALL_remove += "imx-alsa-plugins"

MACHINE_FEATURES_remove = "alsa wifi bluetooth bluez"
DISTRO_FEATURES_remove = "alsa pulseaudio wifi bluetooth bluez5"
IMX_DEFAULT_DISTRO_FEATURES = "opengl ptest multiarch"
ENABLE_BINARY_LOCALE_GENERATION = "0"
## 20210217: add only for internal test
#EXTRA_IMAGE_FEAUTRES = "debug-tweaks"
SERIAL_CONSOLE ?= "115200 ttyLP0"
FLASH_TYPE = "DDRx8"
IMAGE_INSTALL_remove += " rpm"
IMAGE_INSTALL_remove += " can-parse can-utils"
IMAGE_INSTALL_remove += " qca-files wlan-hostapdandwpafiles"
IMAGE_INSTALL_remove += " run-postinsts"
PACKAGE_EXCLUDE += " alsa* bluez can* rpm dnf libxml2"
PACKAGE_EXCLUDE += " gnome-desktop-testing* libasound2 bluez5-*"
PACKAGE_EXCLUDE += " run-postinsts"
#FEATURE_PACKAGES_tools-profile = ""
PACKAGE_EXCLUDE += " packagegroup-core-tools-profile"
PACKAGE_EXCLUDE += " packagegroup-fsl-tools-testapps"
PACKAGE_EXCLUDE += " packagegroup-core-tools-testapps"

IMAGE_INSTALL_remove += " ttf-dejavu-*"
PACKAGE_EXCLUDE += " ttf-dejavu-*"

CORE_IMAGE_EXTRA_INSTALL_remove += " packagegroup-fsl-tools-gpu"
CORE_IMAGE_EXTRA_INSTALL_remove += " packagegroup-fsl-tools-gpu-external"
CORE_IMAGE_EXTRA_INSTALL_remove += " packagegroup-fsl-benchmark"

IMAGE_FEATURES_remove += " allow-empty-password"
IMAGE_FEATURES_remove += " debug-tweaks"

UBOOT_CONFIG = "fspi"
PREFERRED_VERSION_net-snmp = "5.8"
